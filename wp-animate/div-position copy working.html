<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Image Carousel</title>
    <style>
      .reveal-gallery {
        display: flex;
        flex-direction: row;
        position: relative;
      }
      .pin-container {
        width: 50%;
        display: flex;
        flex-direction: column;
      }
      .image-container {
        position: sticky;
        align-self: start;
        width: 50%;
        top: 0;
      }
      .image-gallery {
        width: 400px;
      }

      .image-gallery img {
        position: absolute;
        width: 100%; /* Ensure images fill gallery */
        height: auto; /* Maintain aspect ratio */
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .image-gallery img.active {
        opacity: 1;
      }

      .content-div {
        width: 300px;
        min-height: 800px;
        margin-left: 20px;
      }
    </style>
  </head>
  <body>
    <div class="reveal-gallery">
      <div class="image-container">
        <div class="image-gallery">
          <img
            src="https://images.pexels.com/photos/23221538/pexels-photo-23221538/free-photo-of-a-white-flower-with-green-leaves-in-the-dark.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
            alt="Image 1"
            class="active"
          />
          <img
            src="https://images.pexels.com/photos/1033141/pexels-photo-1033141.jpeg?auto=compress&cs=tinysrgb&w=600&lazy=load"
            alt="Image 2"
          />
          <img
            src="https://images.pexels.com/photos/20147082/pexels-photo-20147082/free-photo-of-a-sunset-over-a-river-and-mountains.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
            alt="Image 3"
          />
        </div>
      </div>
      <div class="pin-container">
        <div class="content-div">Content 1</div>
        <div class="content-div">Content 2</div>
        <div class="content-div">Content 3</div>
      </div>
    </div>

    <script>
      const contentDivs = document.querySelectorAll(".content-div");
      const images = document.querySelectorAll(".image-gallery img");

      function checkContentVisibility() {
        contentDivs.forEach((div, index) => {
          const divRect = div.getBoundingClientRect();
          const viewportHeight = window.innerHeight;

          if (
            divRect.top + divRect.height / 2 >= 0 &&
            divRect.top + divRect.height / 2 <= viewportHeight
          ) {
            images.forEach((img) => img.classList.remove("active"));
            images[index].classList.add("active");
          }
        });
      }

      window.addEventListener("scroll", checkContentVisibility);
      checkContentVisibility();
    </script>
  </body>
</html>
